webpackJsonp([0],[,function(t,e,n){"use strict";var o=n(2),c=n(4),s=n(20);o.a.use(c.a),e.a=new c.a.Store({modules:s.a})},,function(t,e,n){"use strict";var o=n(2),c=n(51),s=n(39),a=n.n(s),i=n(40),r=n.n(i),u=n(42),l=n.n(u),m=n(41),d=n.n(m);o.a.use(c.a),e.a=new c.a({routes:[{path:"/",redirect:"/console"},{path:"/console",name:"Console",component:a.a,meta:{auth:!0}},{path:"/log",name:"log",component:r.a,meta:{auth:!0}},{path:"/monitor",name:"monitor",component:l.a,meta:{auth:!0}},{path:"/login",name:"Login",component:d.a}]}),n(19)},,function(t,e,n){"use strict";var o=n(2),c=n(1);e.a={getLog:function(t,e,n){o.a.http.get(c.a.getters["env/url"]+"/debug/log/get-log/"+t,{timeout:1e3}).then(function(t){e(t)},function(t){n(t)})}}},function(t,e,n){function o(t){n(27)}var c=n(0)(n(11),n(43),o,"data-v-195ca391",null);t.exports=c.exports},function(t,e,n){function o(t){n(29)}var c=n(0)(n(9),n(46),o,"data-v-4bf11252",null);t.exports=c.exports},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(26),c=(n.n(o),n(38)),s=n.n(c);e.default={name:"app",components:{"nav-view":s.a},mounted:function(){var t=this;this.$store.commit("env/reClientId"),this.$store.commit("console/loadCommandStack");var e=window.localStorage.getItem("baseUrl");null!=e&&""!=e&&this.$store.commit("env/changeHost",e),setInterval(function(){t.$store.dispatch("console/refresh")},1e3)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(n(5),n(17));e.default={name:"console_module",data:function(){return{search:"",command:"",isWatch:!0,consoleBox:null}},mounted:function(){var t=this;this.$nextTick(function(){t.consoleBox.scrollTop=t.consoleBox.scrollHeight}),this.consoleBox=document.getElementById("console-box"),this.consoleBox.addEventListener("wheel",this.handleScroll)},filters:{toImg:function(t){return"/static/imgs/level_"+t+".svg"}},methods:{changeSelectLevel:function(t){this.$store.commit("console/selectLevel",t)},handleScroll:function(){this.isWatch=this.consoleBox.scrollTop>=this.consoleBox.scrollHeight-100-800},highlight:function(t,e){return""==e?t:e.indexOf(":")>=0?t:t.replace(new RegExp(e,"gmi"),'<b style="color:rgb(244,100,95)">'+e+"</b>")},isShow:function(t){if(""==this.search)return!0;var e=this.search.indexOf(":");if(e>=0){var n=this.search.substring(0,e),o=this.search.substring(e+1,this.search.length);if("ns"==n)return!(t.namespace.toLowerCase().indexOf(o.toLowerCase())<0)}return t.message.toLowerCase().indexOf(this.search.toLowerCase())>=0},sendCommand:function(){if(!(this.command.length<=0)){if("@"==this.command[0])return"@clear"==this.command&&this.$store.commit("console/clear"),void(this.command="");var t=this.command.indexOf("://"),e="catlib",n=this.command;-1!=t&&(e=this.command.substring(0,t),n=this.command.substring(t+3,this.command.length)),this.$store.commit("console/addCommand",this.command),this.command="",o.a.sendCommand(e+"/"+n,function(t){},function(t){})}},commandNext:function(){this.command=this.$store.getters["console/getCursorCommand"],this.$store.commit("console/next")},commandPrev:function(){this.$store.commit("console/prev"),this.command=this.$store.getters["console/getCursorCommand"]}},computed:{getLogs:function(){return this.$store.getters["console/getLogs"]},levels:function(){return this.$store.getters["console/getLevels"]},selectLevel:function(){return this.$store.getters["console/getSelectLevel"]}},watch:{getLogs:function(){var t=this;this.isWatch&&this.$nextTick(function(){t.consoleBox.scrollTop=t.consoleBox.scrollHeight})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"monitor_module",props:["monitorMaxNum"],data:function(){return{monitors:[]}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"nav",data:function(){return{navs:[{name:"数据监控",url:"/monitor"},{name:"控制台",url:"/console"}]}},methods:{resetDriver:function(){this.$store.commit("env/reClientId"),this.$store.commit("env/changeHost",null)}},computed:{getHostPort:function(){return this.$store.getters["env/hostPort"]},isShowReConnect:function(){return this.$store.getters["env/authorizd"]&&!this.$store.getters["env/isConnect"]},isShowNav:function(){return this.$store.getters["env/authorizd"]}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),c=n.n(o),s=n(37),a=n.n(s);e.default={name:"console",components:{"monitor-view":c.a,"console-view":a.a},data:function(){return{monitorMaxNum:6}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Log",data:function(){return{msg:"Hello Log"}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Login",data:function(){return{host:""}},created:function(){this.host=window.localStorage.getItem("baseUrl")},methods:{commit:function(){this.$store.commit("env/changeHost",this.host)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),c=n.n(o);e.default={name:"monitor",components:{"monitor-view":c.a},data:function(){return{monitorMaxNum:9999}}}},function(t,e,n){"use strict";var o=n(2),c=n(1);e.a={sendCommand:function(t,e,n){o.a.http.get(c.a.getters["env/url"]+"/"+t,{timeout:1e3}).then(function(t){e(t)},function(t){n(t)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),c=(n(4),n(8)),s=n(7),a=n.n(s),i=n(3),r=n(1);o.a.config.productionTip=!1,o.a.use(c.a),new o.a({el:"#app",router:i.a,store:r.a,VueResource:c.a,template:"<App/>",components:{App:a.a}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),c=n(1);o.a.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.auth})?c.a.getters["env/authorizd"]?n():n({path:"/login",query:{from:t.fullPath}}):n()})},function(t,e,n){"use strict";var o=n(22),c=n(21);e.a={env:o.a,console:c.a}},function(t,e,n){"use strict";var o=n(23),c=n.n(o),s=n(5),a={console:[],levels:{999:{name:"全部",count:0},0:{name:"紧急",count:0},1:{name:"警报",count:0},2:{name:"关键",count:0},3:{name:"错误",count:0},4:{name:"警告",count:0},5:{name:"通知",count:0},6:{name:"信息",count:0},7:{name:"调试",count:0}},selectLevel:999,commandStack:[],commandCursor:0},i={getLogs:function(t){return t.console},getLevels:function(t){return t.levels},getSelectLevel:function(t){return t.selectLevel},getCursorCommand:function(t){return null==t.commandStack?"":t.commandCursor>=t.commandStack.length?"":t.commandStack[t.commandCursor]}},r={pushLog:function(t,e){for(var n=0;n<e.data.Response.length;n++)t.console.push(e.data.Response[n]),t.levels[e.data.Response[n].level].count++,t.levels[999].count++},selectLevel:function(t,e){t.selectLevel=e},clear:function(t){t.console=[];for(var e in t.levels)t.levels[e].count=0},loadCommandStack:function(t){try{t.commandStack=JSON.parse(window.localStorage.getItem("commandStack"))}catch(e){t.commandStack=[]}t.commandCursor=0},addCommand:function(t,e){null==t.commandStack&&(t.commandStack=[]);var n=t.commandStack.indexOf(e);n>-1&&t.commandStack.splice(n,1),t.commandStack.length>=50&&t.commandStack.pop(),t.commandStack.unshift(e),t.commandCursor=0,window.localStorage.setItem("commandStack",c()(t.commandStack))},next:function(t){null!=t.commandStack&&t.commandCursor+1<t.commandStack.length&&t.commandCursor++},prev:function(t){null!=t.commandStack&&t.commandCursor-1>=0&&t.commandCursor--}},u={refresh:function(t){var e=t.rootGetters,n=t.commit;e["env/authorizd"]&&s.a.getLog(e["env/clientId"],function(t){e["env/isConnect"]||n("env/changeConnectStatu",!0,{root:!0}),n("pushLog",t)},function(){e["env/isConnect"]&&n("env/changeConnectStatu",!1,{root:!0})})}};e.a={namespaced:!0,state:a,getters:i,mutations:r,actions:u}},function(t,e,n){"use strict";var o=n(3),c=n(1),s={host:null,port:null,clientId:0,isConnect:!1,num:0},a={authorizd:function(t){return""!=t.host&&null!=t.host},url:function(t){return"http://"+t.host+":"+t.port},hostPort:function(t){return t.host+":"+t.port},isConnect:function(t){return t.isConnect},clientId:function(t){return t.clientId}},i={changeHost:function(t,e){if(null==e)t.host=null,t.port=null,t.isConnect=!1,o.a.push({path:"/login"});else{var n=e.split(":");t.host=n[0],t.port=n.length>1?n[1]:"9478",t.isConnect=!0,window.localStorage.setItem("baseUrl",t.host+":"+t.port),c.a.commit("console/clear"),o.a.push({path:"/"})}},reClientId:function(t){t.clientId=Math.floor(65535*Math.random())},changeConnectStatu:function(t,e){t.isConnect=e}};e.a={namespaced:!0,state:s,getters:a,mutations:i}},,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){t.exports=n.p+"static/img/logo.0a98889.png"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNDk4NzI5Njc2MzczIiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjQwODYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTEyLjcwNjU2IDY4MS4yMzk4OTNjLTE2Ljg5MjU4NyAwLTMwLjYxMDc3MyAxMy42NzM4MTMtMzAuNjEwNzczIDMwLjYxNDE4NyAwIDE2Ljg0ODIxMyAxMy43MTgxODcgMzAuNjEwNzczIDMwLjYxMDc3MyAzMC42MTA3NzMgMTYuOTQwMzczIDAgMzAuNjU4NTYtMTMuNzY1OTczIDMwLjY1ODU2LTMwLjYxMDc3M0M1NDMuMzY1MTIgNjk0LjkxMzcwNyA1MjkuNjQ2OTMzIDY4MS4yMzk4OTMgNTEyLjcwNjU2IDY4MS4yMzk4OTN6IiBwLWlkPSI0MDg3IiBmaWxsPSIjZmZmZmZmIj48L3BhdGg+PHBhdGggZD0iTTUxMi43MDY1NiAzMS44MjU5MmMtMjYzLjg5ODQ1MyAwLTQ3Ny44NjY2NjcgMjEzLjkyMDQyNy00NzcuODY2NjY3IDQ3Ny44NjY2NjcgMCAyNjMuODk4NDUzIDIxMy45NjgyMTMgNDc3LjgxODg4IDQ3Ny44NjY2NjcgNDc3LjgxODg4IDI2My45NDYyNCAwIDQ3Ny44NjY2NjctMjEzLjkyMDQyNyA0NzcuODY2NjY3LTQ3Ny44MTg4OEM5OTAuNTczMjI3IDI0NS43NDYzNDcgNzc2LjY1MjggMzEuODI1OTIgNTEyLjcwNjU2IDMxLjgyNTkyek03MjcuMDk0NjEzIDc1NC42OTQ4MjdjMCAyNy4wNjc3MzMtMjEuOTM0MDggNDguOTk4NC00OS4wMDE4MTMgNDguOTk4NGwtMzMwLjcyODEwNyAwYy0yNy4xMTU1MiAwLTQ5LjA0NjE4Ny0yMS45MzA2NjctNDkuMDQ2MTg3LTQ4Ljk5ODRMMjk4LjMxODUwNyAyNjQuNjQ1OTczYzAtMjcuMDY3NzMzIDIxLjkzMDY2Ny00OS4wMDE4MTMgNDkuMDQ2MTg3LTQ5LjAwMTgxM2wzMzAuNzI4MTA3IDBjMjcuMDY3NzMzIDAgNDkuMDAxODEzIDIxLjkzNDA4IDQ5LjAwMTgxMyA0OS4wMDE4MTNsMCAxMjUuNzE5ODkzLTYxLjIyODM3MyAwTDY2NS44NjYyNCAzMDMuODQ0NjkzYzAtMTQuODg1NTQ3LTExLjk5NDQ1My0yNi45MjQzNzMtMjYuOTcyMTYtMjYuOTI0MzczbC0yNTIuMzI3MjUzIDBjLTE0Ljk3NzcwNyAwLTI3LjAxOTk0NyAxMi4wMzg4MjctMjcuMDE5OTQ3IDI2LjkyNDM3M2wwIDMwMS4zNzM0NGMwIDE0Ljk4MTEyIDEyLjAzODgyNyAyNi45Mjc3ODcgMjcuMDE5OTQ3IDI2LjkyNzc4N2wyNTIuMzI3MjUzIDBjMTAuMzgzMzYgMCAxOS4wNjM0NjctNS45Mjg5NiAyMy41NjU2NTMtMTQuNDY1NzA3bDEuMzA3MzA3IDEuMDcxNzg3IDAtMy4wNzg4MjdjMS4zNTE2OC0zLjE3NDQgMi4wOTkyLTYuNzE3NDQgMi4wOTkyLTEwLjQ1NTA0bDAtODIuOTcxMzA3IDYxLjIyODM3MyAwTDcyNy4wOTQ2MTMgNzU0LjY5NDgyN3pNODQwLjc3MjI2NyA0ODYuNDA2ODI3bC0yMTIuODQ1MjI3IDAgMCA1Ni4xODY4OC0xMDQuMjUzNDQtODYuMjg1NjUzIDEwNC4yNTM0NC04Ni4yODU2NTMgMCA1Ni4xODM0NjcgMjEyLjg0NTIyNyAwTDg0MC43NzIyNjcgNDg2LjQwNjgyN3oiIHAtaWQ9IjQwODgiIGZpbGw9IiNmZmZmZmYiPjwvcGF0aD48L3N2Zz4="},function(t,e,n){function o(t){n(31),n(30)}var c=n(0)(n(10),n(47),o,"data-v-53c9c4d0",null);t.exports=c.exports},function(t,e,n){function o(t){n(32)}var c=n(0)(n(12),n(48),o,"data-v-67171b1c",null);t.exports=c.exports},function(t,e,n){function o(t){n(28)}var c=n(0)(n(13),n(44),o,"data-v-443deb34",null);t.exports=c.exports},function(t,e,n){var o=n(0)(n(14),n(45),null,null,null);t.exports=o.exports},function(t,e,n){function o(t){n(33)}var c=n(0)(n(15),n(49),o,"data-v-71486590",null);t.exports=c.exports},function(t,e,n){function o(t){n(34)}var c=n(0)(n(16),n(50),o,"data-v-a34dae2e",null);t.exports=c.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"monitor-list clear"},t._l(t.monitors,function(e,o){return o<t.monitorMaxNum?n("div",{key:e.value,staticClass:"monitor-block"},[n("h1",[t._v(t._s(e.name))]),t._v(" "),n("h2",[t._v(t._s(e.value)),n("span",[t._v(t._s(e.unit))])])]):t._e()}))},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"console"},[n("monitor-view",{attrs:{"monitor-max-num":t.monitorMaxNum}}),t._v(" "),n("console-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav-view"),t._v(" "),n("router-view"),t._v(" "),t._m(0)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("p",[t._v("© Copyright 2017 catlib.io All Rights Reserved")]),t._v(" "),n("p",[t._v("喵喵喵，快来一起玩喵~")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"console-display"},[n("div",{staticClass:"display-filter"},[n("ul",{staticClass:"filter-level clear"},[n("li",{class:{selected:999==t.selectLevel},on:{click:function(e){t.changeSelectLevel(999)}}},[t._v("\n            "+t._s(t.levels[999].name)),t.levels[999].count>0?n("span",[t._v("("+t._s(t.levels[999].count)+")")]):t._e()]),t._v(" "),t._l(t.levels,function(e,o){return 999!=o?n("li",{key:e,class:{selected:t.selectLevel==o},on:{click:function(e){t.changeSelectLevel(o)}}},[t._v("\n            "+t._s(e.name)),e.count>0?n("span",[t._v("("+t._s(e.count)+")")]):t._e()]):t._e()}),t._v(" "),n("li",{staticClass:"filter-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])],2)]),t._v(" "),n("div",{staticClass:"display-screen"},[t.levels[t.selectLevel].count<=0?n("p",{staticClass:"tip"},[t._v("暂时没有日志.")]):t._e(),t._v(" "),n("ul",{attrs:{id:"console-box"}},t._l(t.getLogs,function(e,o){return 999!=t.selectLevel&&e.level!=t.selectLevel||!t.isShow(e)?t._e():n("li",{key:e.id,on:{click:function(t){e.showStack=!e.showStack}}},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:t._f("toImg")(e.level)}})]),t._v(" "),n("div",{staticClass:"message"},[n("p",{staticClass:"title",domProps:{innerHTML:t._s(t.highlight(e.message,t.search))}}),t._v(" "),n("p",{staticClass:"namespace"},[t._v(t._s(e.namespace))]),t._v(" "),n("transition",{attrs:{name:"slide-fade"}},[n("blockquote",{directives:[{name:"show",rawName:"v-show",value:e.showStack,expression:"output.showStack"}]},[e.callStack.length>0?n("div",t._l(e.callStack,function(e,o){return n("p",{key:e.length},[t._v("\n                            "+t._s(e)+"\n                        ")])})):t._e()])],1)],1)])}))]),t._v(" "),n("div",{staticClass:"console-command"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.command,expression:"command"}],attrs:{type:"text"},domProps:{value:t.command},on:{keyup:[function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.sendCommand(e)},function(e){if(!("button"in e)&&38!==e.keyCode)return null;t.commandNext(e)},function(e){if(!("button"in e)&&40!==e.keyCode)return null;t.commandPrev(e)}],input:function(e){e.target.composing||(t.command=e.target.value)}}}),t._v(" "),n("a",{attrs:{href:"#"},on:{click:t.sendCommand}},[t._v("发送(Enter)")])])])},staticRenderFns:[]}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"nav"},[o("img",{attrs:{src:n(35)}}),t._v(" "),o("h1",[t._v("CatLib 调试控制台 "),t.isShowReConnect?o("span",[t._v("与设备 "+t._s(t.getHostPort)+" 断开链接,正在重连...")]):t._e()]),t._v(" "),t.isShowNav?o("ul",{staticClass:"clear"},[o("li",[o("a",{attrs:{href:"#"},on:{click:t.resetDriver}},[t._v("切换设备")])]),t._v(" "),t._l(t.navs,function(e,n){return o("li",{key:e},[o("router-link",{attrs:{to:e.url}},[t._v(t._s(e.name))])],1)})],2):t._e()])},staticRenderFns:[]}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("img",{attrs:{src:n(36)}}),t._v(" "),o("div",{staticClass:"input"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.host,expression:"host"}],attrs:{type:"text"},domProps:{value:t.host},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.commit(e)},input:function(e){e.target.composing||(t.host=e.target.value)}}})]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("请输入要调试设备的IP地址,如:"),n("span",[t._v("192.168.1.1:9478")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"monitor"},[n("monitor-view",{attrs:{"monitor-max-num":t.monitorMaxNum}})],1)},staticRenderFns:[]}},,,,function(t,e){}],[18]);
//# sourceMappingURL=app.38a9c1a8c6fdbc1f2d51.js.map